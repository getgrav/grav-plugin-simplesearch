<div class="search-wrapper">
    <input class="search-input" type="text" placeholder="{{"PLUGIN_SIMPLESEARCH.SEARCH_PLACEHOLDER"|t}}" value="{{ query }}" data-search-input="{{ base_url }}{{ config.plugins.simplesearch.route}}/query" />
    {% if config.plugins.simplesearch.display_button %}
        <button class="search-submit"><img src="{{ url('plugin://simplesearch/assets/search.svg') }}" /></button>
    {% endif %}
    <script>
    document.addEventListener('DOMContentLoaded', function(event) {
      if (document.querySelector('.search-input')) {
        var input = document.querySelector('.search-input');
        input.addEventListener('keypress', function (event) {
          if (event.which == 13 && input.value.length >= {{ config.get('plugins.simplesearch.min_query_length', 3) }}) {
              event.preventDefault();
              window.location.href = input.getAttribute('data-search-input') + '{{ config.system.param_sep }}' + input.value;
          }
        });
      }

      if (document.querySelector('.search-submit')) {
        var submit = document.querySelector('.search-submit');
        submit.addEventListener('click', function (event) {
          event.preventDefault();
          window.location.href = input.getAttribute('data-search-input') + '{{ config.system.param_sep }}' + input.value;
        });
      }
    });
    </script>
</div>
